import{K as I,r as x,j as e,L as S,$ as f,S as c}from"./app-BIxiM4zi.js";import{A as L}from"./app-layout-CGJByD3C.js";import{I as A}from"./layout-DqXblbyw.js";import{H as T}from"./heading-CGEw6JNV.js";import{A as k,a as B,b as H,c as $,d as _,e as K,f as P,g as z}from"./alert-dialog-B2irFhXF.js";import{B as i}from"./app-logo-icon-pQ4BnCQP.js";import{I as E}from"./input-LkNi3APd.js";import{L as M}from"./label-B1m0EZ8G.js";import{T as O,a as R,b as u,c as t,d as q,e as s}from"./table-TKJd9Ewa.js";import{T as F}from"./trash-2-BY3vKzZB.js";/* empty css            */import"./index-DinVnDuX.js";import"./Combination-C89aHk2d.js";import"./index-B-YrhCAK.js";import"./index-BFHFZXKF.js";function ie(){var g,b;const N=I(),{invoices:l,filters:o,flash:r}=N.props,[p,y]=x.useState((o==null?void 0:o.search)||""),[v,d]=x.useState(!1),[h,D]=x.useState(null),j=()=>{c.get("/invoices",{search:p},{preserveState:!0,replace:!0})},w=a=>{D(a),d(!0)},C=()=>{h!==null&&c.delete(`/invoices/${h}`),d(!1)};return e.jsxs(L,{breadcrumbs:J,children:[e.jsx(S,{title:"Daftar Invoice"}),e.jsxs(A,{children:[e.jsxs("div",{className:"mx-auto max-w-6xl space-y-6",children:[(r==null?void 0:r.success)&&e.jsx("div",{className:"rounded-md bg-green-50 p-4 text-sm text-green-700",children:r.success}),(r==null?void 0:r.error)&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 text-sm text-red-700",children:r.error}),e.jsx(T,{title:"Daftar Invoice",description:"Kelola semua invoice yang telah dibuat dan detailnya."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"search",children:"Cari"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsx(E,{id:"search",placeholder:"Cari berdasarkan nomor invoice atau nama customer",value:p,onChange:a=>y(a.target.value),onKeyUp:a=>a.key==="Enter"&&j(),className:"flex-1"}),e.jsx(i,{onClick:j,className:"w-full sm:w-auto",children:"Cari"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(i,{asChild:!0,className:"mb-2",children:e.jsx(f,{href:"/invoices/create",children:"+ Buat Invoice"})})}),e.jsx("div",{className:"overflow-x-auto rounded-md border",children:e.jsxs(O,{children:[e.jsx(R,{children:e.jsxs(u,{children:[e.jsx(t,{children:"Nomor Invoice"}),e.jsx(t,{children:"Customer"}),e.jsx(t,{children:"Periode"}),e.jsx(t,{children:"Jumlah Kontainer"}),e.jsx(t,{children:"Total"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Dibuat Pada"}),e.jsx(t,{className:"text-right",children:"Aksi"})]})}),e.jsx(q,{children:(g=l==null?void 0:l.data)!=null&&g.length?l.data.map(a=>{const n=(a.status??"unpaid").toString().toLowerCase();return e.jsxs(u,{className:"group",children:[e.jsx(s,{className:"py-3 font-medium",children:a.invoice_number}),e.jsx(s,{className:"py-3",children:a.customer.name}),e.jsxs(s,{className:"py-3",children:[new Date(a.period_start).toLocaleDateString("id-ID")," -"," ",new Date(a.period_end).toLocaleDateString("id-ID")]}),e.jsx(s,{className:"py-3",children:a.items_count}),e.jsxs(s,{className:"py-3",children:["Rp ",Number(a.grand_total??0).toLocaleString("id-ID")]}),e.jsx(s,{className:"py-3",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${n==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:n==="paid"?"Lunas":"Belum Lunas"})}),e.jsx(s,{className:"py-3",children:new Date(a.created_at).toLocaleDateString("id-ID")}),e.jsxs(s,{className:"py-3 text-right",children:[n==="unpaid"&&e.jsx(i,{size:"sm",onClick:()=>c.put(`/invoices/${a.id}/pay`),className:"mr-2 bg-green-600 text-white hover:bg-green-700",children:"Lunas"}),n==="paid"&&e.jsx(i,{size:"sm",onClick:()=>c.put(`/invoices/${a.id}/unpay`),className:"mr-2 bg-amber-600 text-white hover:bg-amber-700",children:"Belum Lunas"}),e.jsx(i,{size:"sm",variant:"outline",asChild:!0,className:"mr-2",children:e.jsx(f,{href:`/invoices/${a.id}`,children:"Show"})}),e.jsx("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-md text-sm text-red-500 hover:bg-red-100 disabled:pointer-events-none disabled:opacity-50",onClick:()=>w(a.id),"aria-label":"Hapus",children:e.jsx(F,{className:"h-4 w-4"})})]})]},a.id)}):e.jsx(u,{children:e.jsx(s,{colSpan:10,className:"py-8 text-center text-sm text-gray-500",children:"Belum ada invoice."})})})]})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:(b=l==null?void 0:l.links)==null?void 0:b.map((a,n)=>a.url?e.jsx(i,{variant:a.active?"default":"outline",onClick:()=>c.get(a.url),className:"px-3 py-1 whitespace-nowrap",children:a.label.replace(/&laquo; Previous|Next &raquo;/,m=>m.includes("Previous")?"← Sebelumnya":m.includes("Next")?"Selanjutnya →":m)},n):e.jsx("span",{className:"px-3 py-1",children:"..."},n))})]}),e.jsx(k,{open:v,onOpenChange:d,children:e.jsxs(B,{children:[e.jsxs(H,{children:[e.jsx($,{children:"Hapus Invoice"}),e.jsx(_,{children:"Anda yakin ingin menghapus invoice ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(K,{children:[e.jsx(P,{onClick:()=>d(!1),children:"Batal"}),e.jsx(z,{onClick:C,className:"bg-red-600 hover:bg-red-700",children:"Hapus"})]})]})})]})]})}const J=[{title:"Master Invoice",href:"/invoices"}];export{ie as default};
